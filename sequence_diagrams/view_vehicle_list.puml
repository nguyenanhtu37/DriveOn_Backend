@startuml

title Sequence diagram for View Vehicle List

actor User
boundary VehicleListUI
control AuthMiddleware
control VehicleController
participant VehicleService
participant Database as "VehicleDB"

== View Vehicle List Process ==
User -> VehicleListUI: (1) Click "View Vehicle List"
activate VehicleListUI
VehicleListUI -> AuthMiddleware: (2) Attach authorization token
activate AuthMiddleware
AuthMiddleware -> AuthMiddleware: (3) Validate token
alt Invalid Token
    AuthMiddleware --> VehicleListUI: (4) Return error "Unauthorized"
    deactivate AuthMiddleware
    VehicleListUI --> User: (5) Display error message
    deactivate VehicleListUI
else Valid Token
    AuthMiddleware -> VehicleController: (4) Forward request with user data
    deactivate AuthMiddleware
end

VehicleController -> VehicleService: (5) Process view vehicle list request
activate VehicleService
VehicleService -> VehicleDB: (6) Retrieve vehicle list by userId
activate VehicleDB
VehicleDB --> VehicleService: (7) Return vehicle list
deactivate VehicleDB
VehicleService --> VehicleController: (8) Return vehicle list
deactivate VehicleService
VehicleController --> VehicleListUI: (9) Return vehicle list
deactivate VehicleController
VehicleListUI --> User: (10) Display vehicle list
deactivate VehicleListUI

@enduml