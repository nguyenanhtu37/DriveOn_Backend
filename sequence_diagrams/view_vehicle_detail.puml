@startuml

title Sequence diagram for View Vehicle Detail

actor User
boundary VehicleDetailUI
control AuthMiddleware
control VehicleController
participant VehicleService
participant Database as "VehicleDB"

== View Vehicle Detail Process ==
User -> VehicleDetailUI: (1) Click "View Vehicle Detail"
activate VehicleDetailUI
VehicleDetailUI -> AuthMiddleware: (2) Attach authorization token
activate AuthMiddleware
AuthMiddleware -> AuthMiddleware: (3) Validate token
alt Invalid Token
    AuthMiddleware --> VehicleDetailUI: (4) Return error "Unauthorized"
    deactivate AuthMiddleware
    VehicleDetailUI --> User: (5) Display error message
    deactivate VehicleDetailUI
else Valid Token
    AuthMiddleware -> VehicleController: (4) Forward request with user data
    deactivate AuthMiddleware
end

VehicleController -> VehicleService: (5) Process view vehicle detail request
activate VehicleService
VehicleService -> VehicleDB: (6) Retrieve vehicle detail by vehicleId
activate VehicleDB
VehicleDB --> VehicleService: (7) Return vehicle detail
deactivate VehicleDB
VehicleService --> VehicleController: (8) Return vehicle detail
deactivate VehicleService
VehicleController --> VehicleDetailUI: (9) Return vehicle detail
deactivate VehicleController
VehicleDetailUI --> User: (10) Display vehicle detail
deactivate VehicleDetailUI

@enduml